# Схема подключения DWM1000 к ESP32-C3 Super Mini

## Детальная схема подключения

```
                    ESP32-C3 Super Mini                          DWM1000 Module
                    ┌─────────────────┐                         ┌──────────────┐
                    │                 │                         │              │
     USB ───────────┤ USB             │                         │              │
                    │                 │                         │              │
                    │            3.3V ├─────────────────────────┤ VCC          │
                    │             GND ├─────────────────────────┤ GND          │
                    │                 │                         │              │
                    │       GPIO 4 (SCK) ├──────────────────────┤ SCK          │
                    │      GPIO 5 (MISO) ├──────────────────────┤ MISO         │
                    │      GPIO 6 (MOSI) ├──────────────────────┤ MOSI         │
                    │        GPIO 7 (CS) ├──────────────────────┤ CS (SS)      │
                    │                 │                         │              │
                    │      GPIO 10 (RST) ├──────────────────────┤ RST          │
                    │       GPIO 2 (IRQ) ├──────────────────────┤ IRQ          │
                    │                 │                         │              │
                    └─────────────────┘                         └──────────────┘
                                                                       │
                                                                   [Антенна]
```

## Таблица подключения

| ESP32-C3 GPIO | Функция | DWM1000 Pin | Описание |
|--------------|---------|-------------|----------|
| 3.3V | Питание | VCC | Напряжение питания 3.3V |
| GND | Земля | GND | Общая земля |
| GPIO 4 | SCK | SCK | SPI Clock (тактовая частота) |
| GPIO 5 | MISO | MISO | Master In Slave Out |
| GPIO 6 | MOSI | MOSI | Master Out Slave In |
| GPIO 7 | CS | CS/SS | Chip Select (выбор микросхемы) |
| GPIO 10 | RST | RST | Reset (сброс модуля) |
| GPIO 2 | IRQ | IRQ | Interrupt Request (запрос прерывания) |

## Рекомендации по монтажу

### 1. Питание
- **Обязательно используйте 3.3V!** Подача 5V повредит модуль.
- Установите конденсаторы на линии питания:
  - 100 nF керамический конденсатор максимально близко к пину VCC
  - 10 µF электролитический конденсатор на линии питания

### 2. Провода
- Используйте короткие провода (не более 10-15 см)
- Для SPI линий желательно использовать экранированные или витые пары
- Избегайте параллельного прокладывания проводов на большие расстояния

### 3. Заземление
- Обеспечьте надежное соединение GND
- Используйте общую землю для всех устройств

### 4. Антенна
- Убедитесь, что антенна правильно подключена к модулю
- Антенна должна быть согласована на частоту 6.5 GHz
- Не закрывайте антенну металлическими предметами

## Проверка подключения

После подключения проверьте:

1. **Напряжение питания:**
   ```
   Измерьте мультиметром между VCC и GND
   Должно быть: 3.3V ± 0.1V
   ```

2. **Отсутствие коротких замыканий:**
   ```
   Проверьте сопротивление между:
   - VCC и GND (должно быть > 100 Ом)
   - Соседними пинами (должно быть бесконечность)
   ```

3. **Качество контактов:**
   - Проверьте надежность соединений
   - Убедитесь, что провода не болтаются

## Типичные ошибки

❌ **Неправильно:** Подключение к 5V вместо 3.3V
✅ **Правильно:** Только 3.3V!

❌ **Неправильно:** Длинные провода (>20 см) без экранирования
✅ **Правильно:** Короткие провода (<15 см)

❌ **Неправильно:** Отсутствие развязывающих конденсаторов
✅ **Правильно:** 100nF + 10µF на линии питания

## Альтернативные варианты пинов

Если нужно использовать другие пины ESP32-C3, учтите:

- **SPI пины:** можно изменить на любые GPIO
- **CS (Chip Select):** любой GPIO с выходом
- **RST (Reset):** любой GPIO с выходом  
- **IRQ (Interrupt):** любой GPIO с входом, поддерживающий прерывания

Для изменения пинов отредактируйте файл `include/DWM1000.h`

## Питание от USB

ESP32-C3 Super Mini получает питание от USB, и имеет встроенный регулятор 3.3V.
DWM1000 подключается к выходу 3.3V этого регулятора.

**Потребление тока:**
- ESP32-C3: ~80-160 mA (в зависимости от режима)
- DWM1000: ~100-150 mA (в активном режиме)

**Убедитесь, что ваш USB порт может обеспечить ток не менее 500 mA.**
